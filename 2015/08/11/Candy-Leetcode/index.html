<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Candy - Leetcode | Tyler</title>
  <meta name="author" content="Tyler Yang">
  
  <meta name="description" content="This is a very interesting question and it have a bunch of corner cases that we need to consider. (It takes me more than 5 hours to solve it at the first time.)
Candy
There are N children standing in a line. Each child is assigned a rating value.
You are giving candies to these children subjected to the following requirements:
Each child must have at least one candy.Children with a higher rating get more candies than their neighbors.What is the minimum candies you must give?">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Candy - Leetcode"/>
  <meta property="og:site_name" content="Tyler"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Tyler" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
      var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?136f9d0455315c9611ba56b53088b6f9";
          var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
})();
</script>


</head>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Tyler</a></h1>
  <h2>
      <a href="/">
          Learning requires inefficiency
          
      </a>
  </h2>
</div>
<nav id="main-nav">
  <ul>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
<div class="alignleft" style="margin-top: 15px">


</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
  
    <h1 class="title">Candy - Leetcode</h1>
  

      
        <p class="published">
          Published: <time datetime="2015-08-11T12:30:50.000Z">2015-08-11</time>
        </p>
      
    </header>
    <div class="entry">
      
        <p>This is a very interesting question and it have a bunch of corner cases that we need to consider. (It takes me more than 5 hours to solve it at the first time.)</p>
<h3 id="Candy"><a href="#Candy" class="headerlink" title="Candy"></a>Candy</h3><blockquote>
<p>There are N children standing in a line. Each child is assigned a rating value.</p>
<p>You are giving candies to these children subjected to the following requirements:</p>
<p>Each child must have at least one candy.<br>Children with a higher rating get more candies than their neighbors.<br>What is the minimum candies you must give?</p>
</blockquote>
<a id="more"></a>
<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><p>In a word, the higher rating value you get than your neighbors, the more candies you should get.</p>
<p>Considering the rating array below,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3]</span><br></pre></td></tr></table></figure></p>
<p>the output should be <code>6</code>. This is because the first child have 1 candy, and the next should have 2 candies according to his rating value. It’s easy to get the value.</p>
<p>How about two child are getting same rating value? For example, for <code>[1, 2, 2, 2]</code> the right answer is <code>4</code>. <strong>Children with a higher rating get more candies than their neighbors.</strong></p>
<p>One important thing in solving this problem is, we want to give the minimum candies. This means each time we get a peek rating value, the next child can only have 1 candy until we meet the third child whose rating value is lower than the 2nd one.</p>
<p>Consider the array below,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ratings [1, 2, 6, 5, 4, 3, 2]</span><br><span class="line">   i     0  1  2  3  4  5  6</span><br></pre></td></tr></table></figure></p>
<p>When we meet the first child(i: 0). We give only 1 candy to him. So now our <code>totalCandies</code> is <code>1</code>.<br>And then the second, the third child we can just simply repeat the same process. Then we update our <code>totalCandies</code> in this way.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> ratings     [1, 2, 6, 5, 4, 3, 2]</span><br><span class="line">    i         0  1  2  3  4  5  6</span><br><span class="line">totalCandies  1  3  6</span><br></pre></td></tr></table></figure></p>
<p>Next we meet the 4th child(i: 3), because we know the previous child have the same rating value, so we can simply give only one candy to this child. And then we update our <code>totalCandies</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> ratings     [1, 2, 6, 5, 4, 3, 2]</span><br><span class="line">    i         0  1  2  3  4  5  6</span><br><span class="line">totalCandies  1  3  6  7</span><br></pre></td></tr></table></figure></p>
<p>We meet the 5th child now(i: 4), we can give only 1 candies to him, but we need to give the previous child one more candy for compensation. So update our <code>totalCandies</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> ratings     [1, 2, 6, 5, 4, 3, 2]</span><br><span class="line">    i         0  1  2  3  4  5  6</span><br><span class="line">  candy       1  2  3  2  1</span><br><span class="line">totalCandies  1  3  6  7  9</span><br></pre></td></tr></table></figure></p>
<p>As for compensation, another question to this is, when we should give one more candy to the peek child?(i: 2) Appearently when our candy gap is smaller than our position gap, we need to give one more candy for compensation. For example, when we meet the 6th child, our candy gap is <code>3 - 1 = 2</code>, the position gap is <code>5 - 2 = 3</code>. So at this moment, we need to <code>totalCandies++</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> ratings     [1, 2, 6, 5, 4, 3, 2]</span><br><span class="line">    i         0  1  2  3  4  5  6</span><br><span class="line">  candy       1  2  4  3  2  1</span><br><span class="line">totalCandies  1  3  6  7  9  13</span><br></pre></td></tr></table></figure></p>
<p><a href="https://leetcode.com/problems/candy/" target="_blank" rel="external">Here is the Candy in leetcode oj.</a><br>Here is implementation,<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">candy</span><span class="params">(<span class="keyword">int</span>[] ratings)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ratings.length &lt;= <span class="number">1</span>) <span class="keyword">return</span> ratings.length;</span><br><span class="line">        <span class="keyword">int</span> totalCandies = <span class="number">1</span>, prevCandy = <span class="number">1</span>, peekPos = <span class="number">0</span>, peekCandy = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; ratings.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ratings[i] &gt; ratings[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                prevCandy++;</span><br><span class="line">                peekPos = i;</span><br><span class="line">                peekCandy = prevCandy;</span><br><span class="line">                totalCandies += prevCandy;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                prevCandy = <span class="number">1</span>;</span><br><span class="line">                totalCandies += prevCandy;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(ratings[i] == ratings[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                    peekPos = i;</span><br><span class="line">                    peekCandy = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                totalCandies += i - peekPos - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(peekCandy - <span class="number">1</span> &lt;  i - peekPos) &#123;</span><br><span class="line">                    totalCandies++;   </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> totalCandies;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://github.com/TylerYang/leetcode/blob/master/135.Candy/Solution.java" target="_blank" rel="external">Full version code</a></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Nice problem, though there are some guys can solve it with linear space complexity, in this way we only use O(1) space complexity which I think it’s better than the other solution.</p>

      
    </div>
    <footer>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- hackish -->

  

</div>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 Tyler Yang
  
</div>
<div class="clearfix"></div></footer>
  <!--[if lt IE 9]><script src="/js/html5.js"></script><![endif]-->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script src="/js/tyleryang.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>