<!DOCTYPE html>
<html lang="en">
<head>
    <title> Valid Number - Leetcode Â· Tyler </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Tyler">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />


    <meta name="subtitle" content="Learning requires inefficiency">




    <meta name="keywords" content="Leetcode, Finite State Automata, State Machine, Nlvi" />

<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "Tyler",
        author: "Tyler Yang",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">










</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/tags/Algorithm/" style="font-size: 14px;">Algorithm</a> <a href="/tags/Big-Data/" style="font-size: 14px;">Big Data</a> <a href="/tags/CSAPP/" style="font-size: 14px;">CSAPP</a> <a href="/tags/Computational-Advertising/" style="font-size: 14px;">Computational Advertising</a> <a href="/tags/Design/" style="font-size: 14px;">Design</a> <a href="/tags/Dynamic-Programming/" style="font-size: 14px;">Dynamic Programming</a> <a href="/tags/ETL/" style="font-size: 14px;">ETL</a> <a href="/tags/Elm/" style="font-size: 14px;">Elm</a> <a href="/tags/Finite-State-Automata/" style="font-size: 14px;">Finite State Automata</a> <a href="/tags/Functional-Programming/" style="font-size: 14px;">Functional Programming</a> <a href="/tags/Functional-Reactive-Programming/" style="font-size: 14px;">Functional Reactive Programming</a> <a href="/tags/Golang/" style="font-size: 14px;">Golang</a> <a href="/tags/Google-Challenge/" style="font-size: 14px;">Google Challenge</a> <a href="/tags/Google-Code-Jam/" style="font-size: 14px;">Google Code Jam</a> <a href="/tags/Google-Code-Jam-2016/" style="font-size: 14px;">Google Code Jam 2016</a> <a href="/tags/Greedy-Algorithm/" style="font-size: 14px;">Greedy Algorithm</a> <a href="/tags/Kafka/" style="font-size: 14px;">Kafka</a> <a href="/tags/Language/" style="font-size: 14px;">Language</a> <a href="/tags/Leetcode/" style="font-size: 14px;">Leetcode</a> <a href="/tags/Reactive/" style="font-size: 14px;">Reactive</a> <a href="/tags/Reactive-Extensions/" style="font-size: 14px;">Reactive Extensions</a> <a href="/tags/Rich-Hickey/" style="font-size: 14px;">Rich Hickey</a> <a href="/tags/State-Machine/" style="font-size: 14px;">State Machine</a> <a href="/tags/Statistics/" style="font-size: 14px;">Statistics</a> <a href="/tags/Tech-Talk/" style="font-size: 14px;">Tech Talk</a> <a href="/tags/Tree/" style="font-size: 14px;">Tree</a> <a href="/tags/design-pattern/" style="font-size: 14px;">design pattern</a> <a href="/tags/javascript/" style="font-size: 14px;">javascript</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">Tyler</a></span>
                
                    <span id="subtitle">Learning requires inefficiency</span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        <li class="menu-item">
            <a href="javascript:;" id="search">
                <span>Search</span>
                
                
            </a>
        </li>
        
        
        
            <li class="menu-item">
                <a href="/">
                    <span>Article</span>
                    
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>Archives</span>
                    
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>Tags</span>
                    
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/about">
                    <span>About</span>
                    
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
</header>
<div class="mobile-header">
    <div class="mobile-header-body">
        <div class="mobile-header-list">
            
            
                <div class="mobile-nav-item">
                    <a href="/">
                        <span>Article</span>
                        
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/archives">
                        <span>Archives</span>
                        
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item inner-cloud">
                    <div class="mobile-nav-tag">
                        <a href="javascript:;" id="mobile-tags">
                            <span>Tags</span>
                            
                            
                        </a>
                    </div>
                    <div class="mobile-nav-tagcloud">
                        <div class="mobile-tagcloud-inner">
                            <a href="/tags/Algorithm/" style="font-size: 14px;">Algorithm</a> <a href="/tags/Big-Data/" style="font-size: 14px;">Big Data</a> <a href="/tags/CSAPP/" style="font-size: 14px;">CSAPP</a> <a href="/tags/Computational-Advertising/" style="font-size: 14px;">Computational Advertising</a> <a href="/tags/Design/" style="font-size: 14px;">Design</a> <a href="/tags/Dynamic-Programming/" style="font-size: 14px;">Dynamic Programming</a> <a href="/tags/ETL/" style="font-size: 14px;">ETL</a> <a href="/tags/Elm/" style="font-size: 14px;">Elm</a> <a href="/tags/Finite-State-Automata/" style="font-size: 14px;">Finite State Automata</a> <a href="/tags/Functional-Programming/" style="font-size: 14px;">Functional Programming</a> <a href="/tags/Functional-Reactive-Programming/" style="font-size: 14px;">Functional Reactive Programming</a> <a href="/tags/Golang/" style="font-size: 14px;">Golang</a> <a href="/tags/Google-Challenge/" style="font-size: 14px;">Google Challenge</a> <a href="/tags/Google-Code-Jam/" style="font-size: 14px;">Google Code Jam</a> <a href="/tags/Google-Code-Jam-2016/" style="font-size: 14px;">Google Code Jam 2016</a> <a href="/tags/Greedy-Algorithm/" style="font-size: 14px;">Greedy Algorithm</a> <a href="/tags/Kafka/" style="font-size: 14px;">Kafka</a> <a href="/tags/Language/" style="font-size: 14px;">Language</a> <a href="/tags/Leetcode/" style="font-size: 14px;">Leetcode</a> <a href="/tags/Reactive/" style="font-size: 14px;">Reactive</a> <a href="/tags/Reactive-Extensions/" style="font-size: 14px;">Reactive Extensions</a> <a href="/tags/Rich-Hickey/" style="font-size: 14px;">Rich Hickey</a> <a href="/tags/State-Machine/" style="font-size: 14px;">State Machine</a> <a href="/tags/Statistics/" style="font-size: 14px;">Statistics</a> <a href="/tags/Tech-Talk/" style="font-size: 14px;">Tech Talk</a> <a href="/tags/Tree/" style="font-size: 14px;">Tree</a> <a href="/tags/design-pattern/" style="font-size: 14px;">design pattern</a> <a href="/tags/javascript/" style="font-size: 14px;">javascript</a>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/about">
                        <span>About</span>
                        
                        
                    </a>
                </div>
            
            
        </div>
    </div>
    <div class="mobile-header-nav">
        <div class="mobile-header-item" id="mobile-left">
            <div class="header-menu-item">
                <span class="header-menu-line"></span>
            </div>
        </div>
        <h1 class="mobile-header-title">
            <a href="/">Tyler</a>
        </h1>
        <div class="mobile-header-item"></div>
    </div>
</div>

    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>August 1, 2015</span>
                
                
                    <span class="post-category"><a href="/categories/Interview/">Interview</a></span>
                
                    <span class="post-category"><a href="/categories/Interview/Leetcode/">Leetcode</a></span>
                
                
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                Valid Number - Leetcode
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/tags/Leetcode/">Leetcode</a>
                    
                        <a href="/tags/Finite-State-Automata/">Finite State Automata</a>
                    
                        <a href="/tags/State-Machine/">State Machine</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <p>The hardest problem in leetcode, and it force me to read something new, maybe this is why we solve the problem in the online judge system.</p>
<h3 id="Valid-Number"><a href="#Valid-Number" class="headerlink" title="Valid Number"></a>Valid Number</h3><blockquote>
<p>Valid if a given string is numeric.</p>
<p>Some examples:<br><code>&quot;0&quot;</code> =&gt; <code>true</code><br><code>&quot; 0.1&quot;</code> =&gt; <code>true</code><br><code>&quot;abc&quot;</code> =&gt; <code>true</code><br><code>&quot;1 a&quot;</code> =&gt; <code>true</code><br><code>&quot;2e10&quot;</code> =&gt; <code>true</code><br><a id="more"></a></p>
</blockquote>
<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><p>Well, regular expression must be a way to solve this problem. But I donât think the recuiter would accept regex solution. </p>
<p>This problem is all about state and the transition which is how regular expression worked. </p>
<blockquote>
<p>Finite State Automata<br>A finite-state machine or finite-state automatata, or simply a state machine, is a mathematial model of computation used to design both computer programs and sequential logic circuits. It is conceived as an abstract machine that can be in one of a finite number of states. <strong>The machine is in only one state at a time;</strong>  â from Wikipedia <a href="https://en.wikipedia.org/wiki/Finite-state_machine" target="_blank" rel="external">Finite-state machine</a>.</p>
</blockquote>
<p>In a word, to know whether a string is numeric we need to know all the states and the possible transition. And after spend some time we can get the list below,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1   + or -</div><div class="line">2   number (0 - 9)</div><div class="line">3   . (dot)</div><div class="line">4   e or E (exponent)</div><div class="line">5   others (includ space)</div></pre></td></tr></table></figure></p>
<p>With all this possible inputs, we can use the <a href="https://en.wikipedia.org/wiki/State_diagram" target="_blank" rel="external">State Diagram</a> to describe all the valid and the transitions.<br>For example, from <code>state1</code> it can be only transformed into <code>state2</code> or <code>state3</code>, which means <code>+3</code>, <code>-.4</code> are all valid numeric but <code>+e10</code>, <code>+ 4</code> are not.<br>To give a most complicated valid numeric expression should contains all states, <code>+0.42e-10</code> should be the one.<br>So we can draw down the State Diagram below,<br><img src="https://raw.githubusercontent.com/TylerYang/leetcode/master/65.ValidNumber/validNumber.png" alt="State Diagram"></p>
<p>From this diagram, we can write down the pseudo code blow,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">int state = 0;</div><div class="line">boolean hasNumber = false;</div><div class="line">for(each char in String s)&#123;</div><div class="line">    if(char is plus or minus) &#123;</div><div class="line">        if(state == 0 or 5) &#123;</div><div class="line">            state++;</div><div class="line">        &#125; else &#123;</div><div class="line">            return false;</div><div class="line">        &#125;</div><div class="line">    &#125; else if(char is number) &#123;</div><div class="line">        if(state == 0 or 1 or 2) &#123;</div><div class="line">            state = 2; </div><div class="line">            hasNumber = true;</div><div class="line">        &#125; else if(state == 3 or 4) &#123;</div><div class="line">            state = 4; </div><div class="line">            hasNumber = true;</div><div class="line">        &#125; else if(state == 5 or 6 or 7) &#123;</div><div class="line">            state = 7;</div><div class="line">        &#125;</div><div class="line">    &#125; else if(char is dot) &#123;</div><div class="line">        if(state == 0 or 1 or 2) &#123;</div><div class="line">            state = 3</div><div class="line">        &#125; else &#123;</div><div class="line">            return false;</div><div class="line">        &#125;</div><div class="line">    &#125; else if(char is exponent) &#123;</div><div class="line">        if(state == 2 or 3 or 4) &#123;</div><div class="line">            state = 5;</div><div class="line">        &#125; else &#123;</div><div class="line">            return false;</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">return hashNumber &amp;&amp; (state == 2 or 3 or 4 or 7);</div></pre></td></tr></table></figure></p>
<p><a href="https://leetcode.com/problems/valid-number/" target="_blank" rel="external">Here is the Valid Number in leetcode oj.</a><br><a href="https://github.com/TylerYang/leetcode/blob/master/65.ValidNumber/Solution.java" target="_blank" rel="external">Here is the full version of java implementation.</a></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>As for my understanding, this problem has a very similar concept with Knuth-Morris-Pratt algorithm which is known as KMP algorithm. They are all base on <strong>Finite State Automata</strong>, which is really worth a try. Here I recommend <a href="http://www.amazon.com/Algorithms-4th-Robert-Sedgewick/dp/032157351X/ref=sr_1_1?ie=UTF8&amp;qid=1438428554&amp;sr=8-1&amp;keywords=algorithm" target="_blank" rel="external"><strong>Algorithm (the 4th Edition)</strong></a>, in this book, the author give a very detail introduction of <strong>StateMachine</strong> in chapter 5.</p>

            
        
        </div>
        
            
            
        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/2015/08/01/Dependency-Injection-in-JavaScript/" id="art-left" class="art-right">
                <span class="next-title">
                    Dependency Injection in JavaScript<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/2015/08/01/Palindrome-PartionningII-Leetcode/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>Palindrome PartitioningII - Leetcode
                </span>
            </a>
        
    </nav>

        
    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>1970 ~ 2017</span>
        <span>â¤</span>
        <span>Tyler Yang</span>
    </div>
    <div class="theme">
        <span>
            Powered by
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            Theme
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>
<script src="/script/search.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.mobileHeader();
    Nlvi.back2top();
    Nlvi.smoothScroll();
    Nlvi.onView();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward();
    Nlvi.picPos();

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
    
    <div class="search" id="search">
        <div class="mask" id="mask"></div>
        <div class="search-wrapper syuanpi">
            <h1 id="search-header" class="syuanpi">æç´¢ä¸ä¸ï¼</h1>
            <div class="input">
                <input type="text" id="local-search-input" results="0" name="">
            </div>
            <div id="local-search-result"></div>
        </div>
    </div>
    <script>
    var GREETING = {
        morning: "å½æä»¬æ¢ç´¢æ¶ï¼å°±è¦åç°å°çç",
        noon: "äººçå¤©èå¨äºåäºæ¢ç´¢ççã",
        after: "ä¸ä»¶äºå®æ¯ä¸æ¡æ²¡ææ§å«ççç",
        night: "ççææ¶å¯è½åå¾é»¯æ·¡ï¼ä½å®æ°¸è¿ä¸ä¼çç­",
        midnight: "ççå¨äººé£éè·å¾çå½åï¼å¹¶ä¸å±ç°åºæ¥"
    }
    $(document).ready(function(){
        Nlvi.search();
    });
    </script>

</body>
</html>
